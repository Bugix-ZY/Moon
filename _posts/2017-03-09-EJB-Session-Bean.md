---
layout: post
title: EJB - Session Bean
description: stateless stateful
category: blog
---

- **用户**：session bean 的用户实际上就是直接调用ejb的类的实例，甚至是这个实例的某个方法。同一个类的不同实例对于session bean 来说是不同的用户。

- **有状态会话bean** ：每个用户有自己特有的一个实例，在用户的生存期内，bean保持了用户的信息，即“有状态”；一旦用户灭亡（调用结束或实例结束），bean的生命期也告结束。即每个用户最初都会得到一个初始的bean。

  对于有状态会话Bean来说，只要有客户端发送对有状态会话Bean的访问，服务器都会创建一个会话Bean实例与该客户端对应，这样这个实例与这个客户端就是一一对应的。如果客户端在Bean实例中保存了信息，之后还可以使用。

- **无状态会话bean** ：bean一旦实例化就被加进会话池中，各个用户都可以共用。即使用户已经消亡，bean 的生命期也不一定结束，它可能依然存在于会话池中，供其他用户调用。由于没有特定的用户，那么也就不能保持某一用户的状态，所以叫无状态bean。但无状态会话bean 并非没有状态，如果它有自己的属性（变量），那么这些变量就会受到所有调用它的用户的影响。

  对于无状态会话Bean来说，服务器端会维持一个实例池，创建好若干个实例对象供客户端调用。当从客户端发送创建会话Bean的请求时，并不一定会真的创建 EJB，多数情况下是从实例池中得到一个实例，用完之后重新放回实例池。如果下次再访问，再从实例池中取出一个实例使用，并不一定是上次的实例。即使两次 访问使用的是同一个实例，在两次访问之间也有可能有其他的客户端访问了该实例。所以，并不能保证在多次访问之间的信息会被保存。所以，无状态会话Bean 服务器不会专门保存客户端的信息，数据可以存在客户端。